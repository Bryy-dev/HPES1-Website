import{r as A,j as a}from"./index-CHh0W5_2.js";import{u as he,F as be,s as ye,a as xe,b as V}from"./formik.esm-DCZ0bABG.js";import{b as B}from"./initialStates-C2DwkKKq.js";import{c as b}from"./pdf-worker-BosuxZz1.js";import{p as we,g as Ne,a as te,L as je}from"./loader-CUZWE4u1.js";import{E as _e}from"./ErrorMsg-BZ4DWXRX.js";var re={},Y={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getListFiles=t.getImage=t.getBase64=t.getAcceptTypeString=t.openFileDialog=void 0,t.openFileDialog=function(i){i.current&&i.current.click()},t.getAcceptTypeString=function(i,n){return i!=null&&i.length?i.map(function(u){return"."+u}).join(", "):n?"":"image/*"},t.getBase64=function(i){var n=new FileReader;return new Promise(function(u){n.addEventListener("load",function(){return u(String(n.result))}),n.readAsDataURL(i)})},t.getImage=function(i){var n=new Image;return new Promise(function(u){n.addEventListener("load",function(){return u(n)}),n.src=URL.createObjectURL(i)})},t.getListFiles=function(i,n){for(var u=[],f=0;f<i.length;f+=1)u.push(t.getBase64(i[f]));return Promise.all(u).then(function(e){var c=e.map(function(s,g){var r;return r={},r[n]=s,r.file=i[g],r});return c})}})(Y);var ne={},E={};Object.defineProperty(E,"__esModule",{value:!0});E.DEFAULT_DATA_URL_KEY=E.INIT_MAX_NUMBER=E.DEFAULT_NULL_INDEX=void 0;E.DEFAULT_NULL_INDEX=-1;E.INIT_MAX_NUMBER=1e3;E.DEFAULT_DATA_URL_KEY="dataURL";(function(t){var i=b&&b.__awaiter||function(e,c,s,g){function r(l){return l instanceof s?l:new s(function(v){v(l)})}return new(s||(s=Promise))(function(l,v){function m(p){try{o(g.next(p))}catch(y){v(y)}}function x(p){try{o(g.throw(p))}catch(y){v(y)}}function o(p){p.done?l(p.value):r(p.value).then(m,x)}o((g=g.apply(e,c||[])).next())})},n=b&&b.__generator||function(e,c){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},g,r,l,v;return v={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function m(o){return function(p){return x([o,p])}}function x(o){if(g)throw new TypeError("Generator is already executing.");for(;s;)try{if(g=1,r&&(l=o[0]&2?r.return:o[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,o[1])).done)return l;switch(r=0,l&&(o=[o[0]&2,l.value]),o[0]){case 0:case 1:l=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(o[0]===6||o[0]===2)){s=0;continue}if(o[0]===3&&(!l||o[1]>l[0]&&o[1]<l[3])){s.label=o[1];break}if(o[0]===6&&s.label<l[1]){s.label=l[1],l=o;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(o);break}l[2]&&s.ops.pop(),s.trys.pop();continue}o=c.call(e,s)}catch(p){o=[6,p],r=0}finally{g=l=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorValidation=t.isMaxNumberValid=t.isAcceptTypeValid=t.isMaxFileSizeValid=t.isImageValid=t.isResolutionValid=void 0;var u=E,f=Y;t.isResolutionValid=function(e,c,s,g){if(s===void 0&&(s=0),g===void 0&&(g=1),!s||!g||!e.width||!e.height)return!0;switch(c){case"absolute":{if(e.width===s&&e.height===g)return!0;break}case"ratio":{var r=s/g;if(e.width/e.height===r)return!0;break}case"less":{if(e.width<=s&&e.height<=g)return!0;break}case"more":{if(e.width>=s&&e.height>=g)return!0;break}}return!1},t.isImageValid=function(e){return!!e.includes("image")},t.isMaxFileSizeValid=function(e,c){return c?e<=c:!0},t.isAcceptTypeValid=function(e,c){if(e&&e.length>0){var s=c.split(".").pop()||"";if(e.findIndex(function(g){return g.toLowerCase()===s.toLowerCase()})<0)return!1}return!0},t.isMaxNumberValid=function(e,c,s){if(c!==0&&!c)return!0;if(s===u.DEFAULT_NULL_INDEX){if(e<=c)return!0}else if(e<=c+1)return!0;return!1},t.getErrorValidation=function(e){var c=e.fileList,s=e.value,g=e.maxNumber,r=e.keyUpdate,l=e.acceptType,v=e.maxFileSize,m=e.resolutionType,x=e.resolutionWidth,o=e.resolutionHeight,p=e.allowNonImageType;return i(void 0,void 0,void 0,function(){var y,N,L,j,D;return n(this,function(w){switch(w.label){case 0:return y={},t.isMaxNumberValid(c.length+s.length,g,r)?[3,1]:(y.maxNumber=!0,[3,5]);case 1:N=0,w.label=2;case 2:return N<c.length?(L=c[N].file,L?!p&&!t.isImageValid(L.type)?(y.acceptType=!0,[3,5]):t.isAcceptTypeValid(l,L.name)?t.isMaxFileSizeValid(L.size,v)?m?[4,f.getImage(L)]:[3,4]:(y.maxFileSize=!0,[3,5]):(y.acceptType=!0,[3,5]):[3,4]):[3,5];case 3:if(j=w.sent(),D=t.isResolutionValid(j,m,x,o),!D)return y.resolution=!0,[3,5];w.label=4;case 4:return N+=1,[3,2];case 5:return Object.values(y).find(Boolean)?[2,y]:[2,null]}})})}})(ne);var G=b&&b.__assign||function(){return G=Object.assign||function(t){for(var i,n=1,u=arguments.length;n<u;n++){i=arguments[n];for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(t[f]=i[f])}return t},G.apply(this,arguments)},Le=b&&b.__createBinding||(Object.create?function(t,i,n,u){u===void 0&&(u=n),Object.defineProperty(t,u,{enumerable:!0,get:function(){return i[n]}})}:function(t,i,n,u){u===void 0&&(u=n),t[u]=i[n]}),De=b&&b.__setModuleDefault||(Object.create?function(t,i){Object.defineProperty(t,"default",{enumerable:!0,value:i})}:function(t,i){t.default=i}),Ee=b&&b.__importStar||function(t){if(t&&t.__esModule)return t;var i={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Le(i,t,n);return De(i,t),i},X=b&&b.__awaiter||function(t,i,n,u){function f(e){return e instanceof n?e:new n(function(c){c(e)})}return new(n||(n=Promise))(function(e,c){function s(l){try{r(u.next(l))}catch(v){c(v)}}function g(l){try{r(u.throw(l))}catch(v){c(v)}}function r(l){l.done?e(l.value):f(l.value).then(s,g)}r((u=u.apply(t,i||[])).next())})},$=b&&b.__generator||function(t,i){var n={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},u,f,e,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(r){return function(l){return g([r,l])}}function g(r){if(u)throw new TypeError("Generator is already executing.");for(;n;)try{if(u=1,f&&(e=r[0]&2?f.return:r[0]?f.throw||((e=f.return)&&e.call(f),0):f.next)&&!(e=e.call(f,r[1])).done)return e;switch(f=0,e&&(r=[r[0]&2,e.value]),r[0]){case 0:case 1:e=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,f=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if(e=n.trys,!(e=e.length>0&&e[e.length-1])&&(r[0]===6||r[0]===2)){n=0;continue}if(r[0]===3&&(!e||r[1]>e[0]&&r[1]<e[3])){n.label=r[1];break}if(r[0]===6&&n.label<e[1]){n.label=e[1],e=r;break}if(e&&n.label<e[2]){n.label=e[2],n.ops.push(r);break}e[2]&&n.ops.pop(),n.trys.pop();continue}r=i.call(t,n)}catch(l){r=[6,l],f=0}finally{u=e=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},K=b&&b.__spreadArrays||function(){for(var t=0,i=0,n=arguments.length;i<n;i++)t+=arguments[i].length;for(var u=Array(t),f=0,i=0;i<n;i++)for(var e=arguments[i],c=0,s=e.length;c<s;c++,f++)u[f]=e[c];return u};Object.defineProperty(re,"__esModule",{value:!0});var _=Ee(A),H=Y,Ue=ne,U=E,Fe=function(t){var i=t.value,n=i===void 0?[]:i,u=t.onChange,f=t.onError,e=t.children,c=t.dataURLKey,s=c===void 0?U.DEFAULT_DATA_URL_KEY:c,g=t.multiple,r=g===void 0?!1:g,l=t.maxNumber,v=l===void 0?U.INIT_MAX_NUMBER:l,m=t.acceptType,x=t.maxFileSize,o=t.resolutionWidth,p=t.resolutionHeight,y=t.resolutionType,N=t.inputProps,L=N===void 0?{}:N,j=t.allowNonImageType,D=j===void 0?!1:j,w=n||[],F=_.useRef(null),T=_.useState(U.DEFAULT_NULL_INDEX),k=T[0],C=T[1],q=_.useState(null),J=q[0],Q=q[1],W=_.useState(!1),ae=W[0],z=W[1],P=_.useCallback(function(){return H.openFileDialog(F)},[F]),ie=_.useCallback(function(){C(U.DEFAULT_NULL_INDEX),P()},[P]),le=_.useCallback(function(){u==null||u([])},[u]),se=function(d){var h=K(w);Array.isArray(d)?d.forEach(function(I){h.splice(I,1)}):h.splice(d,1),u==null||u(h)},oe=function(d){C(d),P()},ue=function(d){return X(void 0,void 0,void 0,function(){var h;return $(this,function(I){switch(I.label){case 0:return[4,Ue.getErrorValidation({fileList:d,maxFileSize:x,maxNumber:v,acceptType:m,keyUpdate:k,resolutionType:y,resolutionWidth:o,resolutionHeight:p,value:w,allowNonImageType:D})];case 1:return h=I.sent(),h?(Q(h),f==null||f(h,d),[2,!1]):(J&&Q(null),[2,!0])}})})},Z=function(d){return X(void 0,void 0,void 0,function(){var h,I,S,R,ee,M;return $(this,function(O){switch(O.label){case 0:return d?[4,H.getListFiles(d,s)]:[2];case 1:return h=O.sent(),h.length?[4,ue(h)]:[2];case 2:if(I=O.sent(),!I)return[2];if(R=[],k>U.DEFAULT_NULL_INDEX)ee=h[0],S=K(w),S[k]=ee,R.push(k);else if(r)for(S=K(w,h),M=w.length;M<S.length;M+=1)R.push(M);else S=[h[0]],R.push(0);return u==null||u(S,R),[2]}})})},ce=function(d){return X(void 0,void 0,void 0,function(){return $(this,function(h){switch(h.label){case 0:return[4,Z(d.target.files)];case 1:return h.sent(),k>U.DEFAULT_NULL_INDEX&&C(U.DEFAULT_NULL_INDEX),F.current&&(F.current.value=""),[2]}})})},de=_.useMemo(function(){return H.getAcceptTypeString(m,D)},[m,D]),fe=function(d){d.preventDefault(),d.stopPropagation()},ge=function(d){d.preventDefault(),d.stopPropagation(),d.dataTransfer.items&&d.dataTransfer.items.length>0&&z(!0)},me=function(d){d.preventDefault(),d.stopPropagation(),z(!1)},ve=function(d){d.preventDefault(),d.stopPropagation(),z(!1),d.dataTransfer.files&&d.dataTransfer.files.length>0&&Z(d.dataTransfer.files)},pe=function(d){d.preventDefault(),d.stopPropagation(),d.dataTransfer.clearData()};return _.default.createElement(_.default.Fragment,null,_.default.createElement("input",G({type:"file",accept:de,ref:F,multiple:r&&k===U.DEFAULT_NULL_INDEX,onChange:ce,style:{display:"none"}},L)),e==null?void 0:e({imageList:w,onImageUpload:ie,onImageRemoveAll:le,onImageUpdate:oe,onImageRemove:se,errors:J,dragProps:{onDrop:ve,onDragEnter:ge,onDragLeave:me,onDragOver:fe,onDragStart:pe},isDragging:ae}))},Te=re.default=Fe;const Ie=()=>{const t="brigada";return{insert:async e=>we(`${t}/insert`,e),fetch:async()=>Ne(`${t}/`),update:async(e,c)=>te(`${t}/${c}/${e}`),remove:async e=>te(`${t}/disable/${e}`)}},Ce=({})=>{A.useState(!1);const[t,i]=A.useState(B);A.useState(),A.useState(),A.useState("");const n=Ie(),{mutateAsync:u,isPending:f,isError:e}=he({mutationKey:[""],mutationFn:m=>n.insert(m),onSuccess:()=>{close(),i(B)}}),[c,s]=A.useState([]),g=69,r=(m,x)=>{s(m)},l=m=>{const x=[...c],o=x.splice(m,1)[0];s(x),o==null||o.id},v=async()=>{c.map(m=>m.id),s([])};return a.jsx(a.Fragment,{children:a.jsx(be,{enableReinitialize:!0,initialValues:t,onSubmit:async(m,x)=>{const o=new FormData,p=c.map(N=>N.file);o.append("email",m.email),o.append("name",m.name),o.append("company",m.company),o.append("contact",m.contact),o.append("amount",m.amount),p.forEach(N=>{o.append("files[]",N)});const y=u(o);ye(y,{pending:"Sending Form Please wait..",success:"Form has been submitted, Thank you",error:"Failed to send request."})},children:({values:m,setFieldValue:x,errors:o,touched:p,isValid:y,isSubmitting:N,resetForm:L})=>a.jsxs(xe,{className:"",children:[e&&a.jsx(_e,{}),f&&a.jsx(je,{}),!f&&!e&&a.jsxs("div",{className:"lg:panel px-2",children:[a.jsx("div",{className:"mb-5 lg:py-2 text-center",children:a.jsx("h2",{className:"lg:text-4xl text-2xl font-black text-gray-800 dark:text-white ",children:a.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-cyan-500",children:"Brigada Eskwela Donor Form"})})}),a.jsx("div",{className:"",children:a.jsxs("div",{className:"p-2 text-gray-black  lg:px-20 py-10 bg-white lg:shadow-none lg:border-none lg:rounded-none shadow-xl border rounded-lg ",children:[a.jsxs("div",{className:"grid lg:grid-cols-4 gap-4 lg:px-20 px-4 ",children:[a.jsxs("div",{className:"group lg:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Name of Donor"}),a.jsx(V,{type:"text",name:"name",className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none"})]}),a.jsxs("div",{className:"group lg:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Company"}),a.jsx(V,{type:"text",name:"company",className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none"})]}),a.jsxs("div",{className:"group lg:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Email"}),a.jsx(V,{type:"text",name:"email",className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none"})]}),a.jsxs("div",{className:"group lg:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Contact Number"}),a.jsx(V,{type:"text",name:"contact",className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none"})]}),a.jsxs("div",{className:"group lg:col-span-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Amount Donated"}),a.jsx(V,{type:"text",name:"amount",className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none"})]}),a.jsxs("div",{className:"mt-6  lg:col-span-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-3 text-gray-700",children:"Upload Images (screenshot)"}),a.jsx(Te,{multiple:!0,value:c,onChange:r,maxNumber:g,children:({imageList:j,onImageUpload:D,onImageRemove:w})=>a.jsxs("div",{className:"space-y-4",children:[j.length>0?a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsxs("button",{onClick:D,type:"button",className:"flex items-center gap-2 px-4 py-2 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-all duration-200",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),"Add more"]}),a.jsxs("button",{onClick:()=>v(),type:"button",className:"flex items-center gap-2 px-4 py-2 text-sm bg-red-50 hover:bg-red-100 text-red-600 rounded-lg transition-all duration-200",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Clear all"]})]}):a.jsxs("div",{onClick:D,className:"flex flex-col justify-center items-center border-2 border-dashed border-gray-300 rounded-xl bg-gray-50 p-8 cursor-pointer hover:bg-gray-100 transition-all duration-200",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),a.jsx("p",{className:"text-gray-600 font-medium mb-1",children:"Drag & drop images here"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"or click to browse"})]}),j.length>0&&a.jsx("div",{className:"grid gap-4 sm:grid-cols-3 grid-cols-1 pt-2",children:j.map((F,T)=>a.jsxs("div",{className:"relative group overflow-hidden rounded-lg shadow-sm border border-gray-200",children:[a.jsx("img",{src:F.dataURL,alt:`Upload ${T+1}`,loading:"lazy",className:"w-full h-48 object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-all duration-200 flex items-center justify-center",children:a.jsx("button",{onClick:()=>{w(T),l(T)},type:"button",className:"p-2 bg-white bg-opacity-80 rounded-full hover:bg-opacity-100 transition-all duration-200",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-600",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})})]},T))})]})})]})]}),a.jsxs("div",{className:"flex justify-end items-center gap-3 pt-5 mt-4 border-t border-gray-100 px-5 lg:px-0",children:[a.jsx("button",{className:"px-4 py-2 text-gray-600 bg-gray-50 border hover:bg-gray-100 rounded-lg transition-colors duration-200 text-sm font-medium flex items-center",onClick:j=>{j.preventDefault(),i(B),s([]),L()},children:"Clear"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors duration-200 text-sm font-medium flex items-center shadow-sm",children:"Submit"})]})]})})]})]})})})};export{Ce as default};
