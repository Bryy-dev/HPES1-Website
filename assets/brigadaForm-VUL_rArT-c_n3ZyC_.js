import{u as x,T as F,k as i}from"./index-4os2vz5Y.js";import{k as be,Y as xe,W as ve,V as ye,q as R}from"./formik.esm-DCZ0bABG-D05nK4Yh.js";import{e as B}from"./initialStates-C2DwkKKq-B6C2u25H.js";import{C as we,x as Ne,A as je,S as te}from"./loader-CUZWE4u1-Bc9zbGhW.js";import{f as _e}from"./ErrorMsg-BZ4DWXRX-DbEobzLP.js";var ne={},Y={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getListFiles=t.getImage=t.getBase64=t.getAcceptTypeString=t.openFileDialog=void 0,t.openFileDialog=function(a){a.current&&a.current.click()},t.getAcceptTypeString=function(a,r){return a!=null&&a.length?a.map(function(u){return"."+u}).join(", "):r?"":"image/*"},t.getBase64=function(a){var r=new FileReader;return new Promise(function(u){r.addEventListener("load",function(){return u(String(r.result))}),r.readAsDataURL(a)})},t.getImage=function(a){var r=new Image;return new Promise(function(u){r.addEventListener("load",function(){return u(r)}),r.src=URL.createObjectURL(a)})},t.getListFiles=function(a,r){for(var u=[],p=0;p<a.length;p+=1)u.push(t.getBase64(a[p]));return Promise.all(u).then(function(e){var c=e.map(function(o,f){var n;return n={},n[r]=o,n.file=a[f],n});return c})}})(Y);var re={},E={};Object.defineProperty(E,"__esModule",{value:!0});E.DEFAULT_DATA_URL_KEY=E.INIT_MAX_NUMBER=E.DEFAULT_NULL_INDEX=void 0;E.DEFAULT_NULL_INDEX=-1;E.INIT_MAX_NUMBER=1e3;E.DEFAULT_DATA_URL_KEY="dataURL";(function(t){var a=x&&x.__awaiter||function(e,c,o,f){function n(l){return l instanceof o?l:new o(function(g){g(l)})}return new(o||(o=Promise))(function(l,g){function m(h){try{s(f.next(h))}catch(v){g(v)}}function y(h){try{s(f.throw(h))}catch(v){g(v)}}function s(h){h.done?l(h.value):n(h.value).then(m,y)}s((f=f.apply(e,c||[])).next())})},r=x&&x.__generator||function(e,c){var o={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},f,n,l,g;return g={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function m(s){return function(h){return y([s,h])}}function y(s){if(f)throw new TypeError("Generator is already executing.");for(;o;)try{if(f=1,n&&(l=s[0]&2?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[s[0]&2,l.value]),s[0]){case 0:case 1:l=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(l=o.trys,!(l=l.length>0&&l[l.length-1])&&(s[0]===6||s[0]===2)){o=0;continue}if(s[0]===3&&(!l||s[1]>l[0]&&s[1]<l[3])){o.label=s[1];break}if(s[0]===6&&o.label<l[1]){o.label=l[1],l=s;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(s);break}l[2]&&o.ops.pop(),o.trys.pop();continue}s=c.call(e,o)}catch(h){s=[6,h],n=0}finally{f=l=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorValidation=t.isMaxNumberValid=t.isAcceptTypeValid=t.isMaxFileSizeValid=t.isImageValid=t.isResolutionValid=void 0;var u=E,p=Y;t.isResolutionValid=function(e,c,o,f){if(o===void 0&&(o=0),f===void 0&&(f=1),!o||!f||!e.width||!e.height)return!0;switch(c){case"absolute":{if(e.width===o&&e.height===f)return!0;break}case"ratio":{var n=o/f;if(e.width/e.height===n)return!0;break}case"less":{if(e.width<=o&&e.height<=f)return!0;break}case"more":{if(e.width>=o&&e.height>=f)return!0;break}}return!1},t.isImageValid=function(e){return!!e.includes("image")},t.isMaxFileSizeValid=function(e,c){return c?e<=c:!0},t.isAcceptTypeValid=function(e,c){if(e&&e.length>0){var o=c.split(".").pop()||"";if(e.findIndex(function(f){return f.toLowerCase()===o.toLowerCase()})<0)return!1}return!0},t.isMaxNumberValid=function(e,c,o){if(c!==0&&!c)return!0;if(o===u.DEFAULT_NULL_INDEX){if(e<=c)return!0}else if(e<=c+1)return!0;return!1},t.getErrorValidation=function(e){var c=e.fileList,o=e.value,f=e.maxNumber,n=e.keyUpdate,l=e.acceptType,g=e.maxFileSize,m=e.resolutionType,y=e.resolutionWidth,s=e.resolutionHeight,h=e.allowNonImageType;return a(void 0,void 0,void 0,function(){var v,N,L,j,D;return r(this,function(w){switch(w.label){case 0:return v={},t.isMaxNumberValid(c.length+o.length,f,n)?[3,1]:(v.maxNumber=!0,[3,5]);case 1:N=0,w.label=2;case 2:return N<c.length?(L=c[N].file,L?!h&&!t.isImageValid(L.type)?(v.acceptType=!0,[3,5]):t.isAcceptTypeValid(l,L.name)?t.isMaxFileSizeValid(L.size,g)?m?[4,p.getImage(L)]:[3,4]:(v.maxFileSize=!0,[3,5]):(v.acceptType=!0,[3,5]):[3,4]):[3,5];case 3:if(j=w.sent(),D=t.isResolutionValid(j,m,y,s),!D)return v.resolution=!0,[3,5];w.label=4;case 4:return N+=1,[3,2];case 5:return Object.values(v).find(Boolean)?[2,v]:[2,null]}})})}})(re);var K=x&&x.__assign||function(){return K=Object.assign||function(t){for(var a,r=1,u=arguments.length;r<u;r++){a=arguments[r];for(var p in a)Object.prototype.hasOwnProperty.call(a,p)&&(t[p]=a[p])}return t},K.apply(this,arguments)},Le=x&&x.__createBinding||(Object.create?function(t,a,r,u){u===void 0&&(u=r),Object.defineProperty(t,u,{enumerable:!0,get:function(){return a[r]}})}:function(t,a,r,u){u===void 0&&(u=r),t[u]=a[r]}),De=x&&x.__setModuleDefault||(Object.create?function(t,a){Object.defineProperty(t,"default",{enumerable:!0,value:a})}:function(t,a){t.default=a}),Ee=x&&x.__importStar||function(t){if(t&&t.__esModule)return t;var a={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Le(a,t,r);return De(a,t),a},X=x&&x.__awaiter||function(t,a,r,u){function p(e){return e instanceof r?e:new r(function(c){c(e)})}return new(r||(r=Promise))(function(e,c){function o(l){try{n(u.next(l))}catch(g){c(g)}}function f(l){try{n(u.throw(l))}catch(g){c(g)}}function n(l){l.done?e(l.value):p(l.value).then(o,f)}n((u=u.apply(t,a||[])).next())})},$=x&&x.__generator||function(t,a){var r={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},u,p,e,c;return c={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function o(n){return function(l){return f([n,l])}}function f(n){if(u)throw new TypeError("Generator is already executing.");for(;r;)try{if(u=1,p&&(e=n[0]&2?p.return:n[0]?p.throw||((e=p.return)&&e.call(p),0):p.next)&&!(e=e.call(p,n[1])).done)return e;switch(p=0,e&&(n=[n[0]&2,e.value]),n[0]){case 0:case 1:e=n;break;case 4:return r.label++,{value:n[1],done:!1};case 5:r.label++,p=n[1],n=[0];continue;case 7:n=r.ops.pop(),r.trys.pop();continue;default:if(e=r.trys,!(e=e.length>0&&e[e.length-1])&&(n[0]===6||n[0]===2)){r=0;continue}if(n[0]===3&&(!e||n[1]>e[0]&&n[1]<e[3])){r.label=n[1];break}if(n[0]===6&&r.label<e[1]){r.label=e[1],e=n;break}if(e&&r.label<e[2]){r.label=e[2],r.ops.push(n);break}e[2]&&r.ops.pop(),r.trys.pop();continue}n=a.call(t,r)}catch(l){n=[6,l],p=0}finally{u=e=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},H=x&&x.__spreadArrays||function(){for(var t=0,a=0,r=arguments.length;a<r;a++)t+=arguments[a].length;for(var u=Array(t),p=0,a=0;a<r;a++)for(var e=arguments[a],c=0,o=e.length;c<o;c++,p++)u[p]=e[c];return u};Object.defineProperty(ne,"__esModule",{value:!0});var _=Ee(F),W=Y,ke=re,k=E,Te=function(t){var a=t.value,r=a===void 0?[]:a,u=t.onChange,p=t.onError,e=t.children,c=t.dataURLKey,o=c===void 0?k.DEFAULT_DATA_URL_KEY:c,f=t.multiple,n=f===void 0?!1:f,l=t.maxNumber,g=l===void 0?k.INIT_MAX_NUMBER:l,m=t.acceptType,y=t.maxFileSize,s=t.resolutionWidth,h=t.resolutionHeight,v=t.resolutionType,N=t.inputProps,L=N===void 0?{}:N,j=t.allowNonImageType,D=j===void 0?!1:j,w=r||[],T=_.useRef(null),U=_.useState(k.DEFAULT_NULL_INDEX),I=U[0],C=U[1],q=_.useState(null),G=q[0],J=q[1],Q=_.useState(!1),ae=Q[0],P=Q[1],z=_.useCallback(function(){return W.openFileDialog(T)},[T]),ie=_.useCallback(function(){C(k.DEFAULT_NULL_INDEX),z()},[z]),le=_.useCallback(function(){u==null||u([])},[u]),oe=function(d){var b=H(w);Array.isArray(d)?d.forEach(function(A){b.splice(A,1)}):b.splice(d,1),u==null||u(b)},se=function(d){C(d),z()},ue=function(d){return X(void 0,void 0,void 0,function(){var b;return $(this,function(A){switch(A.label){case 0:return[4,ke.getErrorValidation({fileList:d,maxFileSize:y,maxNumber:g,acceptType:m,keyUpdate:I,resolutionType:v,resolutionWidth:s,resolutionHeight:h,value:w,allowNonImageType:D})];case 1:return b=A.sent(),b?(J(b),p==null||p(b,d),[2,!1]):(G&&J(null),[2,!0])}})})},Z=function(d){return X(void 0,void 0,void 0,function(){var b,A,S,V,ee,M;return $(this,function(O){switch(O.label){case 0:return d?[4,W.getListFiles(d,o)]:[2];case 1:return b=O.sent(),b.length?[4,ue(b)]:[2];case 2:if(A=O.sent(),!A)return[2];if(V=[],I>k.DEFAULT_NULL_INDEX)ee=b[0],S=H(w),S[I]=ee,V.push(I);else if(n)for(S=H(w,b),M=w.length;M<S.length;M+=1)V.push(M);else S=[b[0]],V.push(0);return u==null||u(S,V),[2]}})})},ce=function(d){return X(void 0,void 0,void 0,function(){return $(this,function(b){switch(b.label){case 0:return[4,Z(d.target.files)];case 1:return b.sent(),I>k.DEFAULT_NULL_INDEX&&C(k.DEFAULT_NULL_INDEX),T.current&&(T.current.value=""),[2]}})})},de=_.useMemo(function(){return W.getAcceptTypeString(m,D)},[m,D]),pe=function(d){d.preventDefault(),d.stopPropagation()},fe=function(d){d.preventDefault(),d.stopPropagation(),d.dataTransfer.items&&d.dataTransfer.items.length>0&&P(!0)},me=function(d){d.preventDefault(),d.stopPropagation(),P(!1)},ge=function(d){d.preventDefault(),d.stopPropagation(),P(!1),d.dataTransfer.files&&d.dataTransfer.files.length>0&&Z(d.dataTransfer.files)},he=function(d){d.preventDefault(),d.stopPropagation(),d.dataTransfer.clearData()};return _.default.createElement(_.default.Fragment,null,_.default.createElement("input",K({type:"file",accept:de,ref:T,multiple:n&&I===k.DEFAULT_NULL_INDEX,onChange:ce,style:{display:"none"}},L)),e==null?void 0:e({imageList:w,onImageUpload:ie,onImageRemoveAll:le,onImageUpdate:se,onImageRemove:oe,errors:G,dragProps:{onDrop:ge,onDragEnter:fe,onDragLeave:me,onDragOver:pe,onDragStart:he},isDragging:ae}))},Ue=ne.default=Te;const Ae=()=>{const t="brigada";return{insert:async a=>Ne(`${t}/insert`,a),fetch:async()=>je(`${t}/`),update:async(a,r)=>te(`${t}/${r}/${a}`),remove:async a=>te(`${t}/disable/${a}`)}},Me=({})=>{F.useState(!1);const[t,a]=F.useState(B);F.useState(),F.useState(),F.useState("");const r=Ae(),{mutateAsync:u,isPending:p,isError:e}=be({mutationKey:[""],mutationFn:m=>r.insert(m),onSuccess:()=>{close(),a(B)}}),[c,o]=F.useState([]),f=69,n=(m,y)=>{o(m)},l=m=>{const y=[...c],s=y.splice(m,1)[0];o(y),s==null||s.id},g=async()=>{c.map(m=>m.id),o([])};return i.jsx(i.Fragment,{children:i.jsx(xe,{enableReinitialize:!0,initialValues:t,onSubmit:async(m,y)=>{const s=new FormData,h=c.map(N=>N.file);s.append("email",m.email),s.append("name",m.name),s.append("company",m.company),s.append("contact",m.contact),s.append("amount",m.amount),h.forEach(N=>{s.append("files[]",N)});const v=u(s);ve(v,{pending:"Sending Form Please wait..",success:"Form has been submitted, Thank you",error:"Failed to send request."})},children:({values:m,setFieldValue:y,errors:s,touched:h,isValid:v,isSubmitting:N,resetForm:L})=>i.jsxs(ye,{className:"",children:[e&&i.jsx(_e,{}),p&&i.jsx(we,{}),!p&&!e&&i.jsxs("div",{className:"lg:panel px-2",children:[i.jsx("div",{className:"mb-5 lg:py-2 text-center",children:i.jsx("h2",{className:"lg:text-4xl text-2xl font-black text-gray-800 dark:text-white ",children:i.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-cyan-500",children:"Brigada Eskwela Donor Form"})})}),i.jsx("div",{className:"",children:i.jsxs("div",{className:"p-2 text-gray-black  lg:px-20 py-10 bg-white lg:shadow-none lg:border-none lg:rounded-none shadow-xl border rounded-lg ",children:[i.jsxs("div",{className:"grid lg:grid-cols-4 gap-4 lg:px-20 px-4 ",children:[i.jsxs("div",{className:"group lg:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Name of Donor"}),i.jsx(R,{type:"text",name:"name",className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none"})]}),i.jsxs("div",{className:"group lg:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Company"}),i.jsx(R,{type:"text",name:"company",className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none"})]}),i.jsxs("div",{className:"group lg:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Email"}),i.jsx(R,{type:"text",name:"email",className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none"})]}),i.jsxs("div",{className:"group lg:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Contact Number"}),i.jsx(R,{type:"text",name:"contact",className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none"})]}),i.jsxs("div",{className:"group lg:col-span-4",children:[i.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Amount Donated"}),i.jsx(R,{type:"text",name:"amount",className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none"})]}),i.jsxs("div",{className:"mt-6  lg:col-span-4",children:[i.jsx("label",{className:"block text-sm font-medium mb-3 text-gray-700",children:"Upload Images (screenshot)"}),i.jsx(Ue,{multiple:!0,value:c,onChange:n,maxNumber:f,children:({imageList:j,onImageUpload:D,onImageRemove:w})=>i.jsxs("div",{className:"space-y-4",children:[j.length>0?i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsxs("button",{onClick:D,type:"button",className:"flex items-center gap-2 px-4 py-2 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-all duration-200",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),"Add more"]}),i.jsxs("button",{onClick:()=>g(),type:"button",className:"flex items-center gap-2 px-4 py-2 text-sm bg-red-50 hover:bg-red-100 text-red-600 rounded-lg transition-all duration-200",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Clear all"]})]}):i.jsxs("div",{onClick:D,className:"flex flex-col justify-center items-center border-2 border-dashed border-gray-300 rounded-xl bg-gray-50 p-8 cursor-pointer hover:bg-gray-100 transition-all duration-200",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),i.jsx("p",{className:"text-gray-600 font-medium mb-1",children:"Drag & drop images here"}),i.jsx("p",{className:"text-gray-500 text-sm",children:"or click to browse"})]}),j.length>0&&i.jsx("div",{className:"grid gap-4 sm:grid-cols-3 grid-cols-1 pt-2",children:j.map((T,U)=>i.jsxs("div",{className:"relative group overflow-hidden rounded-lg shadow-sm border border-gray-200",children:[i.jsx("img",{src:T.dataURL,alt:`Upload ${U+1}`,loading:"lazy",className:"w-full h-48 object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-all duration-200 flex items-center justify-center",children:i.jsx("button",{onClick:()=>{w(U),l(U)},type:"button",className:"p-2 bg-white bg-opacity-80 rounded-full hover:bg-opacity-100 transition-all duration-200",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-600",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})})]},U))})]})})]})]}),i.jsxs("div",{className:"flex justify-end items-center gap-3 pt-5 mt-4 border-t border-gray-100 px-5 lg:px-0",children:[i.jsx("button",{className:"px-4 py-2 text-gray-600 bg-gray-50 border hover:bg-gray-100 rounded-lg transition-colors duration-200 text-sm font-medium flex items-center",onClick:j=>{j.preventDefault(),a(B),o([]),L()},children:"Clear"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors duration-200 text-sm font-medium flex items-center shadow-sm",children:"Submit"})]})]})})]})]})})})};export{Me as default};
