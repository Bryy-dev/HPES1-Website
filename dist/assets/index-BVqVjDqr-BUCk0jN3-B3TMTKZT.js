import{T as n,R as An}from"./index-CkfK2x5R.js";const Gt="carousel",lt="controller",Xn="navigation",Yn="no-scroll",at="portal",Hn="root",qt="toolbar",Rt="captions",It="fullscreen",Qe="thumbnails",Pt="zoom",Ve="loading",Ue="error",Be="complete",Vn="placeholder",Un=e=>`active-slide-${e}`,Bn="fullsize",Ee="flex_center",Kn="no_scroll",Jt="no_scroll_padding",ct="slide",Qt="slide_wrapper",jn="slide_wrapper_interactive",ae="prev",ce="next",et="swipe",xe="close",en="onPointerDown",tn="onPointerMove",nn="onPointerUp",rn="onPointerLeave",on="onPointerCancel",st="onKeyDown",Gn="onKeyUp",ut="onWheel",qn="Escape",Jn="ArrowLeft",Qn="ArrowRight",er="button",$e="icon",ln="contain",$t="cover",an="Unknown action type",cn="yarl__";function U(...e){return[...e].filter(Boolean).join(" ")}function C(e){return`${cn}${e}`}function W(e){return`--${cn}${e}`}function me(e,t){return`${e}${t?`_${t}`:""}`}function fe(e){return t=>me(e,t)}function tr(e,t){var i;return(i=e==null?void 0:e[t])!==null&&i!==void 0?i:t}function Te(...e){return()=>{e.forEach(t=>{t()})}}function re(e,t,i){return()=>{const r=n.useContext(i);if(!r)throw new Error(`${e} must be used within a ${t}.Provider`);return r}}function dt(){return typeof window<"u"}function ht(e,t=0){const i=10**t;return Math.round((e+Number.EPSILON)*i)/i}function pe(e){return e.type===void 0||e.type==="image"}function mt(e,t){return e.imageFit===$t||e.imageFit!==ln&&t===$t}function De(e){return typeof e=="string"?Number.parseInt(e,10):e}function ze(e){if(typeof e=="number")return{pixel:e};if(typeof e=="string"){const t=De(e);return e.endsWith("%")?{percent:t}:{pixel:t}}return{pixel:0}}function nr(e,t){const i=ze(t),r=i.percent!==void 0?e.width/100*i.percent:i.pixel;return{width:Math.max(e.width-2*r,0),height:Math.max(e.height-2*r,0)}}function rr(){return(dt()?window==null?void 0:window.devicePixelRatio:void 0)||1}function sn(e,t){return t>0?(e%t+t)%t:0}function ft(e){return e.length>0}function pt(e,t){return e[sn(t,e.length)]}function tt(e,t){return ft(e)?pt(e,t):void 0}function un(e){return pe(e)?e.src:void 0}function vt(e,t,i){if(!i)return e;const{buttons:r,...o}=e,l=r.findIndex(c=>c===t),a=n.isValidElement(i)?n.cloneElement(i,{key:t},null):i;if(l>=0){const c=[...r];return c.splice(l,1,a),{buttons:c,...o}}return{buttons:[a,...r],...o}}function dn(e,t,i=0){return Math.min(e.preload,Math.max(e.finite?t.length-1:Math.floor(t.length/2),i))}const or=Number(n.version.split(".")[0])>=19;function ir(e){return{inert:or?e:e?"":void 0}}function lr(e){e.scrollTop}const nt={open:!1,close:()=>{},index:0,slides:[],render:{},plugins:[],toolbar:{buttons:[xe]},labels:{},animation:{fade:250,swipe:500,easing:{fade:"ease",swipe:"ease-out",navigation:"ease-in-out"}},carousel:{finite:!1,preload:2,padding:"16px",spacing:"30%",imageFit:ln,imageProps:{}},controller:{ref:null,focus:!0,aria:!1,touchAction:"none",closeOnPullUp:!1,closeOnPullDown:!1,closeOnBackdropClick:!1,preventDefaultWheelX:!0,preventDefaultWheelY:!1,disableSwipeNavigation:!1},portal:{},noScroll:{disabled:!1},on:{},styles:{},className:""};function oe(e,t){return{name:e,component:t}}function X(e,t){return{module:e,children:t}}function hn(e,t,i){return e.module.name===t?i(e):e.children?[X(e.module,e.children.flatMap(r=>{var o;return(o=hn(r,t,i))!==null&&o!==void 0?o:[]}))]:[e]}function ge(e,t,i){return e.flatMap(r=>{var o;return(o=hn(r,t,i))!==null&&o!==void 0?o:[]})}function ar(e,t=[],i=[]){let r=e;const o=f=>{const p=[...r];for(;p.length>0;){const v=p.pop();if((v==null?void 0:v.module.name)===f)return!0;v!=null&&v.children&&p.push(...v.children)}return!1},l=(f,p)=>{if(f===""){r=[X(p,r)];return}r=ge(r,f,v=>[X(p,[v])])},a=(f,p)=>{r=ge(r,f,v=>[X(v.module,[X(p,v.children)])])},c=(f,p,v)=>{r=ge(r,f,R=>{var w;return[X(R.module,[...v?[X(p)]:[],...(w=R.children)!==null&&w!==void 0?w:[],...v?[]:[X(p)]])]})},u=(f,p,v)=>{r=ge(r,f,R=>[...v?[X(p)]:[],R,...v?[]:[X(p)]])},s=f=>{a(lt,f)},d=(f,p)=>{r=ge(r,f,v=>[X(p,v.children)])},m=f=>{r=ge(r,f,p=>p.children)},g=f=>{i.push(f)};return t.forEach(f=>{f({contains:o,addParent:l,append:a,addChild:c,addSibling:u,addModule:s,replace:d,remove:m,augment:g})}),{config:r,augmentation:f=>i.reduce((p,v)=>v(p),f)}}const mn=n.createContext(null),Me=re("useDocument","DocumentContext",mn);function cr({nodeRef:e,children:t}){const i=n.useMemo(()=>{const r=o=>{var l;return((l=o||e.current)===null||l===void 0?void 0:l.ownerDocument)||document};return{getOwnerDocument:r,getOwnerWindow:o=>{var l;return((l=r(o))===null||l===void 0?void 0:l.defaultView)||window}}},[e]);return n.createElement(mn.Provider,{value:i},t)}const fn=n.createContext(null),Ce=re("useEvents","EventsContext",fn);function sr({children:e}){const[t]=n.useState({});n.useEffect(()=>()=>{Object.keys(t).forEach(r=>delete t[r])},[t]);const i=n.useMemo(()=>{const r=(o,l)=>{var a;(a=t[o])===null||a===void 0||a.splice(0,t[o].length,...t[o].filter(c=>c!==l))};return{publish:(...[o,l])=>{var a;(a=t[o])===null||a===void 0||a.forEach(c=>c(l))},subscribe:(o,l)=>(t[o]||(t[o]=[]),t[o].push(l),()=>r(o,l)),unsubscribe:r}},[t]);return n.createElement(fn.Provider,{value:i},e)}const pn=n.createContext(null),A=re("useLightboxProps","LightboxPropsContext",pn);function vn({children:e,...t}){return n.createElement(pn.Provider,{value:t},e)}const gn=n.createContext(null),le=re("useLightboxState","LightboxStateContext",gn),bn=n.createContext(null),ur=re("useLightboxDispatch","LightboxDispatchContext",bn);function dr(e,t){switch(t.type){case"swipe":{const{slides:i}=e,r=(t==null?void 0:t.increment)||0,o=e.globalIndex+r,l=sn(o,i.length),a=tt(i,l),c=r||t.duration!==void 0?{increment:r,duration:t.duration,easing:t.easing}:void 0;return{slides:i,currentIndex:l,globalIndex:o,currentSlide:a,animation:c}}case"update":return t.slides!==e.slides||t.index!==e.currentIndex?{slides:t.slides,currentIndex:t.index,globalIndex:t.index,currentSlide:tt(t.slides,t.index)}:e;default:throw new Error(an)}}function hr({slides:e,index:t,children:i}){const[r,o]=n.useReducer(dr,{slides:e,currentIndex:t,globalIndex:t,currentSlide:tt(e,t)});n.useEffect(()=>{o({type:"update",slides:e,index:t})},[e,t]);const l=n.useMemo(()=>({...r,state:r,dispatch:o}),[r,o]);return n.createElement(bn.Provider,{value:o},n.createElement(gn.Provider,{value:l},i))}const En=n.createContext(null),Fe=re("useTimeouts","TimeoutsContext",En);function mr({children:e}){const[t]=n.useState([]);n.useEffect(()=>()=>{t.forEach(r=>window.clearTimeout(r)),t.splice(0,t.length)},[t]);const i=n.useMemo(()=>{const r=o=>{t.splice(0,t.length,...t.filter(l=>l!==o))};return{setTimeout:(o,l)=>{const a=window.setTimeout(()=>{r(a),o()},l);return t.push(a),a},clearTimeout:o=>{o!==void 0&&(r(o),window.clearTimeout(o))}}},[t]);return n.createElement(En.Provider,{value:i},e)}const ke=n.forwardRef(function({label:e,className:t,icon:i,renderIcon:r,onClick:o,style:l,...a},c){const{styles:u,labels:s}=A(),d=tr(s,e);return n.createElement("button",{ref:c,type:"button",title:d,"aria-label":d,className:U(C(er),t),onClick:o,style:{...l,...u.button},...a},r?r():n.createElement(i,{className:C($e),style:u.icon}))});function xn(e,t){const i=r=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false",...r},t);return i.displayName=e,i}function ee(e,t){return xn(e,n.createElement("g",{fill:"currentColor"},n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),t))}function wn(e,t){return xn(e,n.createElement(n.Fragment,null,n.createElement("defs",null,n.createElement("mask",{id:"strike"},n.createElement("path",{d:"M0 0h24v24H0z",fill:"white"}),n.createElement("path",{d:"M0 0L24 24",stroke:"black",strokeWidth:4}))),n.createElement("path",{d:"M0.70707 2.121320L21.878680 23.292883",stroke:"currentColor",strokeWidth:2}),n.createElement("g",{fill:"currentColor",mask:"url(#strike)"},n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),t)))}const fr=ee("Close",n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),pr=ee("Previous",n.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),vr=ee("Next",n.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),gr=ee("Loading",n.createElement(n.Fragment,null,Array.from({length:8}).map((e,t,i)=>n.createElement("line",{key:t,x1:"12",y1:"6.5",x2:"12",y2:"1.8",strokeLinecap:"round",strokeWidth:"2.6",stroke:"currentColor",strokeOpacity:1/i.length*(t+1),transform:`rotate(${360/i.length*t}, 12, 12)`})))),br=ee("Error",n.createElement("path",{d:"M21.9,21.9l-8.49-8.49l0,0L3.59,3.59l0,0L2.1,2.1L0.69,3.51L3,5.83V19c0,1.1,0.9,2,2,2h13.17l2.31,2.31L21.9,21.9z M5,18 l3.5-4.5l2.5,3.01L12.17,15l3,3H5z M21,18.17L5.83,3H19c1.1,0,2,0.9,2,2V18.17z"})),ne=dt()?n.useLayoutEffect:n.useEffect;function gt(){const[e,t]=n.useState(!1);return n.useEffect(()=>{var i,r;const o=(i=window.matchMedia)===null||i===void 0?void 0:i.call(window,"(prefers-reduced-motion: reduce)");t(o==null?void 0:o.matches);const l=a=>t(a.matches);return(r=o==null?void 0:o.addEventListener)===null||r===void 0||r.call(o,"change",l),()=>{var a;return(a=o==null?void 0:o.removeEventListener)===null||a===void 0?void 0:a.call(o,"change",l)}},[]),e}function Er(e){let t=0,i=0,r=0;const o=window.getComputedStyle(e).transform.match(/matrix.*\((.+)\)/);if(o){const l=o[1].split(",").map(De);l.length===6?(t=l[4],i=l[5]):l.length===16&&(t=l[12],i=l[13],r=l[14])}return{x:t,y:i,z:r}}function rt(e,t){const i=n.useRef(void 0),r=n.useRef(void 0),o=gt();return ne(()=>{var l,a,c;if(e.current&&i.current!==void 0&&!o){const{keyframes:u,duration:s,easing:d,onfinish:m}=t(i.current,e.current.getBoundingClientRect(),Er(e.current))||{};if(u&&s){(l=r.current)===null||l===void 0||l.cancel(),r.current=void 0;try{r.current=(c=(a=e.current).animate)===null||c===void 0?void 0:c.call(a,u,{duration:s,easing:d})}catch(g){console.error(g)}r.current&&(r.current.onfinish=()=>{r.current=void 0,m==null||m()})}}i.current=void 0}),{prepareAnimation:l=>{i.current=l},isAnimationPlaying:()=>{var l;return((l=r.current)===null||l===void 0?void 0:l.playState)==="running"}}}function yn(){const e=n.useRef(null),t=n.useRef(void 0),[i,r]=n.useState();return{setContainerRef:n.useCallback(o=>{e.current=o,t.current&&(t.current.disconnect(),t.current=void 0);const l=()=>{if(o){const a=window.getComputedStyle(o),c=u=>parseFloat(u)||0;r({width:Math.round(o.clientWidth-c(a.paddingLeft)-c(a.paddingRight)),height:Math.round(o.clientHeight-c(a.paddingTop)-c(a.paddingBottom))})}else r(void 0)};l(),o&&typeof ResizeObserver<"u"&&(t.current=new ResizeObserver(l),t.current.observe(o))},[]),containerRef:e,containerRect:i}}function Pe(){const e=n.useRef(void 0),{setTimeout:t,clearTimeout:i}=Fe();return n.useCallback((r,o)=>{i(e.current),e.current=t(r,o>0?o:0)},[t,i])}function D(e){const t=n.useRef(e);return ne(()=>{t.current=e}),n.useCallback((...i)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...i)},[])}function zt(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function ot(e,t){return n.useMemo(()=>e==null&&t==null?null:i=>{zt(e,i),zt(t,i)},[e,t])}function xr(e,t=!1){const i=n.useRef(!1);ne(()=>{t&&i.current&&(i.current=!1,e())},[t,e]);const r=n.useCallback(()=>{i.current=!0},[]),o=n.useCallback(()=>{i.current=!1},[]);return{onFocus:r,onBlur:o}}function We(){const[e,t]=n.useState(!1);return ne(()=>{t(window.getComputedStyle(window.document.documentElement).direction==="rtl")},[]),e}function Mn(){const[e]=n.useState({}),t=n.useCallback((o,l)=>{var a;(a=e[o])===null||a===void 0||a.forEach(c=>{l.isPropagationStopped()||c(l)})},[e]),i=n.useMemo(()=>({onPointerDown:o=>t(en,o),onPointerMove:o=>t(tn,o),onPointerUp:o=>t(nn,o),onPointerLeave:o=>t(rn,o),onPointerCancel:o=>t(on,o),onKeyDown:o=>t(st,o),onKeyUp:o=>t(Gn,o),onWheel:o=>t(ut,o)}),[t]),r=n.useCallback((o,l)=>(e[o]||(e[o]=[]),e[o].unshift(l),()=>{const a=e[o];a&&a.splice(0,a.length,...a.filter(c=>c!==l))}),[e]);return{registerSensors:i,subscribeSensors:r}}function Tt(e,t){const i=n.useRef(0),r=Pe(),o=D((...l)=>{i.current=Date.now(),e(l)});return n.useCallback((...l)=>{r(()=>{o(l)},t-(Date.now()-i.current))},[t,o,r])}const Ke=fe("slide"),je=fe("slide_image");function de({slide:e,offset:t,render:i,rect:r,imageFit:o,imageProps:l,onClick:a,onLoad:c,onError:u,style:s}){var d,m,g,f,p,v,R;const[w,S]=n.useState(Ve),{publish:$}=Ce(),{setTimeout:z}=Fe(),k=n.useRef(null);n.useEffect(()=>{t===0&&$(Un(w))},[t,w,$]);const T=D(N=>{("decode"in N?N.decode():Promise.resolve()).catch(()=>{}).then(()=>{N.parentNode&&(S(Be),z(()=>{c==null||c(N)},0))})}),I=n.useCallback(N=>{k.current=N,N!=null&&N.complete&&T(N)},[T]),M=n.useCallback(N=>{T(N.currentTarget)},[T]),y=D(()=>{S(Ue),u==null||u()}),F=mt(e,o),B=(N,K)=>Number.isFinite(N)?N:K,O=B(Math.max(...((m=(d=e.srcSet)===null||d===void 0?void 0:d.map(N=>N.width))!==null&&m!==void 0?m:[]).concat(e.width?[e.width]:[]).filter(Boolean)),((g=k.current)===null||g===void 0?void 0:g.naturalWidth)||0),L=B(Math.max(...((p=(f=e.srcSet)===null||f===void 0?void 0:f.map(N=>N.height))!==null&&p!==void 0?p:[]).concat(e.height?[e.height]:[]).filter(Boolean)),((v=k.current)===null||v===void 0?void 0:v.naturalHeight)||0),b=O&&L?{maxWidth:`min(${O}px, 100%)`,maxHeight:`min(${L}px, 100%)`}:{maxWidth:"100%",maxHeight:"100%"},h=(R=e.srcSet)===null||R===void 0?void 0:R.sort((N,K)=>N.width-K.width).map(N=>`${N.src} ${N.width}w`).join(", "),x=()=>r&&!F&&e.width&&e.height?r.height/e.height*e.width:Number.MAX_VALUE,P=h&&r&&dt()?`${Math.round(Math.min(x(),r.width))}px`:void 0,{style:Z,className:H,...G}=l||{};return n.createElement(n.Fragment,null,n.createElement("img",{ref:I,onLoad:M,onError:y,onClick:a,draggable:!1,className:U(C(je()),F&&C(je("cover")),w!==Be&&C(je("loading")),H),style:{...b,...s,...Z},...G,alt:e.alt,sizes:P,srcSet:h,src:e.src}),w!==Be&&n.createElement("div",{className:C(Ke(Vn))},w===Ve&&(i!=null&&i.iconLoading?i.iconLoading():n.createElement(gr,{className:U(C($e),C(Ke(Ve)))})),w===Ue&&(i!=null&&i.iconError?i.iconError():n.createElement(br,{className:U(C($e),C(Ke(Ue)))}))))}const wr=n.forwardRef(function({className:e,children:t,...i},r){const o=n.useRef(null);return n.createElement(cr,{nodeRef:o},n.createElement("div",{ref:ot(r,o),className:U(C("root"),e),...i},t))});var V;(function(e){e[e.NONE=0]="NONE",e[e.SWIPE=1]="SWIPE",e[e.PULL=2]="PULL",e[e.ANIMATION=3]="ANIMATION"})(V||(V={}));function Cn(e,t,i,r,o){n.useEffect(()=>o?()=>{}:Te(e(en,t),e(tn,i),e(nn,r),e(rn,r),e(on,r)),[e,t,i,r,o])}var Q;(function(e){e[e.NONE=0]="NONE",e[e.SWIPE=1]="SWIPE",e[e.PULL=2]="PULL"})(Q||(Q={}));const Ge=30;function yr({disableSwipeNavigation:e,closeOnBackdropClick:t},i,r,o,l,a,c,u,s,d,m,g,f,p,v,R){const w=n.useRef(0),S=n.useRef([]),$=n.useRef(void 0),z=n.useRef(0),k=n.useRef(Q.NONE),T=n.useCallback(L=>{$.current===L.pointerId&&($.current=void 0,k.current=Q.NONE);const b=S.current;b.splice(0,b.length,...b.filter(h=>h.pointerId!==L.pointerId))},[]),I=n.useCallback(L=>{T(L),L.persist(),S.current.push(L)},[T]),M=n.useCallback(L=>S.current.find(({pointerId:b})=>L.pointerId===b),[]),y=D(L=>{I(L)}),F=(L,b)=>m&&L>b||d&&L<-b,B=D(L=>{const b=M(L);if(b)if($.current===L.pointerId){const h=Date.now()-z.current,x=w.current;k.current===Q.SWIPE?Math.abs(x)>.3*o||Math.abs(x)>5&&h<l?u(x,h):s(x):k.current===Q.PULL&&(F(x,2*Ge)?p(x,h):v(x)),w.current=0,k.current=Q.NONE}else{const{target:h}=L;t&&h instanceof HTMLElement&&h===b.target&&(h.classList.contains(C(ct))||h.classList.contains(C(Qt)))&&R()}T(L)}),O=D(L=>{const b=M(L);if(b){const h=$.current===L.pointerId;if(L.buttons===0){h&&w.current!==0?B(L):T(b);return}const x=L.clientX-b.clientX,P=L.clientY-b.clientY;if($.current===void 0){const Z=H=>{I(L),$.current=L.pointerId,z.current=Date.now(),k.current=H};Math.abs(x)>Math.abs(P)&&Math.abs(x)>Ge&&r(x)?e||(Z(Q.SWIPE),a()):Math.abs(P)>Math.abs(x)&&F(P,Ge)&&(Z(Q.PULL),g())}else h&&(k.current===Q.SWIPE?(w.current=x,c(x)):k.current===Q.PULL&&(w.current=P,f(P)))}});Cn(i,y,O,B)}function Mr({preventDefaultWheelX:e,preventDefaultWheelY:t}){const i=n.useRef(null),r=D(o=>{const l=Math.abs(o.deltaX)>Math.abs(o.deltaY);(l&&e||!l&&t||o.ctrlKey)&&o.preventDefault()});return n.useCallback(o=>{var l;o?o.addEventListener("wheel",r,{passive:!1}):(l=i.current)===null||l===void 0||l.removeEventListener("wheel",r),i.current=o},[r])}function Cr(e,t,i,r,o,l,a,c,u){const s=n.useRef(0),d=n.useRef(0),m=n.useRef(void 0),g=n.useRef(void 0),f=n.useRef(0),p=n.useRef(void 0),v=n.useRef(0),{setTimeout:R,clearTimeout:w}=Fe(),S=n.useCallback(()=>{m.current&&(w(m.current),m.current=void 0)},[w]),$=n.useCallback(()=>{g.current&&(w(g.current),g.current=void 0)},[w]),z=D(()=>{e!==V.SWIPE&&(s.current=0,v.current=0,S(),$())});n.useEffect(z,[e,z]);const k=D(I=>{g.current=void 0,s.current===I&&u(s.current)}),T=D(I=>{if(I.ctrlKey||Math.abs(I.deltaY)>Math.abs(I.deltaX))return;const M=y=>{f.current=y,w(p.current),p.current=y>0?R(()=>{f.current=0,p.current=void 0},300):void 0};if(e===V.NONE){if(Math.abs(I.deltaX)<=1.2*Math.abs(f.current)){M(I.deltaX);return}if(!i(-I.deltaX))return;if(d.current+=I.deltaX,S(),Math.abs(d.current)>30)d.current=0,M(0),v.current=Date.now(),l();else{const y=d.current;m.current=R(()=>{m.current=void 0,y===d.current&&(d.current=0)},o)}}else if(e===V.SWIPE){let y=s.current-I.deltaX;if(y=Math.min(Math.abs(y),r)*Math.sign(y),s.current=y,a(y),$(),Math.abs(y)>.2*r){M(I.deltaX),c(y,Date.now()-v.current);return}g.current=R(()=>k(y),2*o)}else M(I.deltaX)});n.useEffect(()=>t(ut,T),[t,T])}const Dt=fe("container"),kn=n.createContext(null),ie=re("useController","ControllerContext",kn);function kr({children:e,...t}){var i;const{carousel:r,animation:o,controller:l,on:a,styles:c,render:u}=t,{closeOnPullUp:s,closeOnPullDown:d,preventDefaultWheelX:m,preventDefaultWheelY:g}=l,[f,p]=n.useState(),v=le(),R=ur(),[w,S]=n.useState(V.NONE),$=n.useRef(0),z=n.useRef(0),k=n.useRef(1),{registerSensors:T,subscribeSensors:I}=Mn(),{subscribe:M,publish:y}=Ce(),F=Pe(),B=Pe(),O=Pe(),{containerRef:L,setContainerRef:b,containerRect:h}=yn(),x=ot(Mr({preventDefaultWheelX:m,preventDefaultWheelY:g}),b),P=n.useRef(null),Z=ot(P,void 0),{getOwnerDocument:H}=Me(),G=We(),N=E=>(G?-1:1)*(typeof E=="number"?E:1),K=D(()=>{var E;return(E=L.current)===null||E===void 0?void 0:E.focus()}),Le=D(()=>t),yt=D(()=>v),Ne=n.useCallback(E=>y(ae,E),[y]),Se=n.useCallback(E=>y(ce,E),[y]),ve=n.useCallback(()=>y(xe),[y]),_e=E=>!(r.finite&&(N(E)>0&&v.currentIndex===0||N(E)<0&&v.currentIndex===v.slides.length-1)),Mt=E=>{var _;$.current=E,(_=L.current)===null||_===void 0||_.style.setProperty(W("swipe_offset"),`${Math.round(E)}px`)},Ze=E=>{var _,j;z.current=E,k.current=(()=>{const q=d&&E>0?E:s&&E<0?-E:0;return Math.min(Math.max(ht(1-q/60*(1-.5),2),.5),1)})(),(_=L.current)===null||_===void 0||_.style.setProperty(W("pull_offset"),`${Math.round(E)}px`),(j=L.current)===null||j===void 0||j.style.setProperty(W("pull_opacity"),`${k.current}`)},{prepareAnimation:Fn}=rt(P,(E,_,j)=>{if(P.current&&h)return{keyframes:[{transform:`translate(0, ${E.rect.y-_.y+j.y}px)`,opacity:E.opacity},{transform:"translate(0, 0)",opacity:1}],duration:E.duration,easing:o.easing.fade}}),Ct=(E,_)=>{if(s||d){Ze(E);let j=0;P.current&&(j=o.fade*(_?2:1),Fn({rect:P.current.getBoundingClientRect(),opacity:k.current,duration:j})),O(()=>{Ze(0),S(V.NONE)},j),S(V.ANIMATION),_||ve()}},{prepareAnimation:Wn,isAnimationPlaying:On}=rt(P,(E,_,j)=>{var q;if(P.current&&h&&!((q=v.animation)===null||q===void 0)&&q.duration){const J=ze(r.spacing),Ae=(J.percent?J.percent*h.width/100:J.pixel)||0;return{keyframes:[{transform:`translate(${N(v.globalIndex-E.index)*(h.width+Ae)+E.rect.x-_.x+j.x}px, 0)`},{transform:"translate(0, 0)"}],duration:v.animation.duration,easing:v.animation.easing}}}),we=D(E=>{var _,j;const q=E.offset||0,J=q?o.swipe:(_=o.navigation)!==null&&_!==void 0?_:o.swipe,Ae=!q&&!On()?o.easing.navigation:o.easing.swipe;let{direction:Re}=E;const Ie=(j=E.count)!==null&&j!==void 0?j:1;let Xe=V.ANIMATION,te=J*Ie;if(!Re){const ye=h==null?void 0:h.width,St=E.duration||0,He=ye?J/ye*Math.abs(q):J;Ie!==0?(St<He?te=te/He*Math.max(St,He/5):ye&&(te=J/ye*(ye-Math.abs(q))),Re=N(q)>0?ae:ce):te=J/2}let Ye=0;Re===ae?_e(N(1))?Ye=-Ie:(Xe=V.NONE,te=J):Re===ce&&(_e(N(-1))?Ye=Ie:(Xe=V.NONE,te=J)),te=Math.round(te),B(()=>{Mt(0),S(V.NONE)},te),P.current&&Wn({rect:P.current.getBoundingClientRect(),index:v.globalIndex}),S(Xe),y(et,{type:"swipe",increment:Ye,duration:te,easing:Ae})});n.useEffect(()=>{var E,_;!((E=v.animation)===null||E===void 0)&&E.increment&&!((_=v.animation)===null||_===void 0)&&_.duration&&F(()=>R({type:"swipe",increment:0}),v.animation.duration)},[v.animation,R,F]);const kt=[I,_e,(h==null?void 0:h.width)||0,o.swipe,()=>S(V.SWIPE),E=>Mt(E),(E,_)=>we({offset:E,duration:_,count:1}),E=>we({offset:E,count:0})],_n=[()=>{d&&S(V.PULL)},E=>Ze(E),E=>Ct(E),E=>Ct(E,!0)];yr(l,...kt,s,d,..._n,ve),Cr(w,...kt);const Lt=D(()=>{l.focus&&H().querySelector(`.${C(at)} .${C(Dt())}`)&&K()});n.useEffect(Lt,[Lt]);const Nt=D(()=>{var E;(E=a.view)===null||E===void 0||E.call(a,{index:v.currentIndex})});n.useEffect(Nt,[v.globalIndex,Nt]),n.useEffect(()=>Te(M(ae,E=>we({direction:ae,...E})),M(ce,E=>we({direction:ce,...E})),M(et,E=>R(E))),[M,we,R]);const Zn=n.useMemo(()=>({prev:Ne,next:Se,close:ve,focus:K,slideRect:h?nr(h,r.padding):{width:0,height:0},containerRect:h||{width:0,height:0},subscribeSensors:I,containerRef:L,setCarouselRef:Z,toolbarWidth:f,setToolbarWidth:p}),[Ne,Se,ve,K,I,h,L,Z,f,p,r.padding]);return n.useImperativeHandle(l.ref,()=>({prev:Ne,next:Se,close:ve,focus:K,getLightboxProps:Le,getLightboxState:yt}),[Ne,Se,ve,K,Le,yt]),n.createElement("div",{ref:x,className:U(C(Dt()),C(Ee)),style:{...w===V.SWIPE?{[W("swipe_offset")]:`${Math.round($.current)}px`}:null,...w===V.PULL?{[W("pull_offset")]:`${Math.round(z.current)}px`,[W("pull_opacity")]:`${k.current}`}:null,...l.touchAction!=="none"?{[W("controller_touch_action")]:l.touchAction}:null,...c.container},...l.aria?{role:"region","aria-live":"polite","aria-roledescription":"carousel"}:null,tabIndex:-1,...T},h&&n.createElement(kn.Provider,{value:Zn},e,(i=u.controls)===null||i===void 0?void 0:i.call(u)))}const Lr=oe(lt,kr);function se(e){return me(Gt,e)}function Ft(e){return me(ct,e)}function Nr({slide:e,offset:t}){const i=n.useRef(null),{currentIndex:r}=le(),{slideRect:o,focus:l}=ie(),{render:a,carousel:{imageFit:c,imageProps:u},on:{click:s},styles:{slide:d}}=A(),{getOwnerDocument:m}=Me(),g=t!==0;n.useEffect(()=>{var p;g&&!((p=i.current)===null||p===void 0)&&p.contains(m().activeElement)&&l()},[g,l,m]);const f=()=>{var p,v,R,w;let S=(p=a.slide)===null||p===void 0?void 0:p.call(a,{slide:e,offset:t,rect:o});return!S&&pe(e)&&(S=n.createElement(de,{slide:e,offset:t,render:a,rect:o,imageFit:c,imageProps:u,onClick:g?void 0:()=>s==null?void 0:s({index:r})})),S?n.createElement(n.Fragment,null,(v=a.slideHeader)===null||v===void 0?void 0:v.call(a,{slide:e}),((R=a.slideContainer)!==null&&R!==void 0?R:({children:$})=>$)({slide:e,children:S}),(w=a.slideFooter)===null||w===void 0?void 0:w.call(a,{slide:e})):null};return n.createElement("div",{ref:i,className:U(C(Ft()),!g&&C(Ft("current")),C(Ee)),...ir(g),style:d,role:"region","aria-roledescription":"slide"},f())}function Sr(){const e=A().styles.slide;return n.createElement("div",{className:C(ct),style:e})}function Rr({carousel:e}){const{slides:t,currentIndex:i,globalIndex:r}=le(),{setCarouselRef:o}=ie(),l=ze(e.spacing),a=ze(e.padding),c=dn(e,t,1),u=[];if(ft(t))for(let s=i-c;s<=i+c;s+=1){const d=pt(t,s),m=r-i+s,g=e.finite&&(s<0||s>t.length-1);u.push(g?{key:m}:{key:[`${m}`,un(d)].filter(Boolean).join("|"),offset:s-i,slide:d})}return n.createElement("div",{ref:o,className:U(C(se()),u.length>0&&C(se("with_slides"))),style:{[`${W(se("slides_count"))}`]:u.length,[`${W(se("spacing_px"))}`]:l.pixel||0,[`${W(se("spacing_percent"))}`]:l.percent||0,[`${W(se("padding_px"))}`]:a.pixel||0,[`${W(se("padding_percent"))}`]:a.percent||0}},u.map(({key:s,slide:d,offset:m})=>d?n.createElement(Nr,{key:s,slide:d,offset:m}):n.createElement(Sr,{key:s})))}const Ir=oe(Gt,Rr);function Ln(){const{carousel:e}=A(),{slides:t,currentIndex:i}=le(),r=t.length===0||e.finite&&i===0,o=t.length===0||e.finite&&i===t.length-1;return{prevDisabled:r,nextDisabled:o}}function Nn(e){var t;const i=We(),{publish:r}=Ce(),{animation:o}=A(),{prevDisabled:l,nextDisabled:a}=Ln(),c=((t=o.navigation)!==null&&t!==void 0?t:o.swipe)/2,u=Tt(()=>r(ae),c),s=Tt(()=>r(ce),c),d=D(m=>{switch(m.key){case qn:r(xe);break;case Jn:(i?a:l)||(i?s:u)();break;case Qn:(i?l:a)||(i?u:s)();break}});n.useEffect(()=>e(st,d),[e,d])}function Wt({label:e,icon:t,renderIcon:i,action:r,onClick:o,disabled:l,style:a}){return n.createElement(ke,{label:e,icon:t,renderIcon:i,className:C(`navigation_${r}`),disabled:l,onClick:o,style:a,...xr(ie().focus,l)})}function Pr({render:{buttonPrev:e,buttonNext:t,iconPrev:i,iconNext:r},styles:o}){const{prev:l,next:a,subscribeSensors:c}=ie(),{prevDisabled:u,nextDisabled:s}=Ln();return Nn(c),n.createElement(n.Fragment,null,e?e():n.createElement(Wt,{label:"Previous",action:ae,icon:pr,renderIcon:i,style:o.navigationPrev,disabled:u,onClick:l}),t?t():n.createElement(Wt,{label:"Next",action:ce,icon:vr,renderIcon:r,style:o.navigationNext,disabled:s,onClick:a}))}const $r=oe(Xn,Pr),Ot=C(Kn),zr=C(Jt);function Tr(e){return"style"in e}function _t(e,t,i){const r=window.getComputedStyle(e),o=i?"padding-left":"padding-right",l=i?r.paddingLeft:r.paddingRight,a=e.style.getPropertyValue(o);return e.style.setProperty(o,`${(De(l)||0)+t}px`),()=>{a?e.style.setProperty(o,a):e.style.removeProperty(o)}}function Dr({noScroll:{disabled:e},children:t}){const i=We(),{getOwnerDocument:r,getOwnerWindow:o}=Me();return n.useEffect(()=>{if(e)return()=>{};const l=[],a=o(),{body:c,documentElement:u}=r(),s=Math.round(a.innerWidth-u.clientWidth);if(s>0){l.push(_t(c,s,i));const d=c.getElementsByTagName("*");for(let m=0;m<d.length;m+=1){const g=d[m];Tr(g)&&a.getComputedStyle(g).getPropertyValue("position")==="fixed"&&!g.classList.contains(zr)&&l.push(_t(g,s,i))}}return c.classList.add(Ot),()=>{c.classList.remove(Ot),l.forEach(d=>d())}},[i,e,r,o]),n.createElement(n.Fragment,null,t)}const Fr=oe(Yn,Dr);function Zt(e){return me(at,e)}function At(e,t,i){const r=e.getAttribute(t);return e.setAttribute(t,i),()=>{r?e.setAttribute(t,r):e.removeAttribute(t)}}function Wr({children:e,animation:t,styles:i,className:r,on:o,portal:l,close:a}){const[c,u]=n.useState(!1),[s,d]=n.useState(!1),m=n.useRef([]),g=n.useRef(null),{setTimeout:f}=Fe(),{subscribe:p}=Ce(),v=gt()?0:t.fade;n.useEffect(()=>(u(!0),()=>{u(!1),d(!1)}),[]);const R=D(()=>{m.current.forEach(z=>z()),m.current=[]}),w=D(()=>{var z;d(!1),R(),(z=o.exiting)===null||z===void 0||z.call(o),f(()=>{var k;(k=o.exited)===null||k===void 0||k.call(o),a()},v)});n.useEffect(()=>p(xe,w),[p,w]);const S=D(z=>{var k,T,I;lr(z),d(!0),(k=o.entering)===null||k===void 0||k.call(o);const M=(I=(T=z.parentNode)===null||T===void 0?void 0:T.children)!==null&&I!==void 0?I:[];for(let y=0;y<M.length;y+=1){const F=M[y];["TEMPLATE","SCRIPT","STYLE"].indexOf(F.tagName)===-1&&F!==z&&(m.current.push(At(F,"inert","")),m.current.push(At(F,"aria-hidden","true")))}m.current.push(()=>{var y,F;(F=(y=g.current)===null||y===void 0?void 0:y.focus)===null||F===void 0||F.call(y)}),f(()=>{var y;(y=o.entered)===null||y===void 0||y.call(o)},v)}),$=n.useCallback(z=>{z?S(z):R()},[S,R]);return c?An.createPortal(n.createElement(wr,{ref:$,className:U(r,C(Zt()),C(Jt),s&&C(Zt("open"))),"aria-modal":!0,role:"dialog","aria-live":"polite","aria-roledescription":"lightbox",style:{...t.fade!==nt.animation.fade?{[W("fade_animation_duration")]:`${v}ms`}:null,...t.easing.fade!==nt.animation.easing.fade?{[W("fade_animation_timing_function")]:t.easing.fade}:null,...i.root},onFocus:z=>{g.current||(g.current=z.relatedTarget)}},e),l.root||document.body):null}const Or=oe(at,Wr);function _r({children:e}){return n.createElement(n.Fragment,null,e)}const Zr=oe(Hn,_r);function Ar(e){return me(qt,e)}function Xr({toolbar:{buttons:e},render:{buttonClose:t,iconClose:i},styles:r}){const{close:o,setToolbarWidth:l}=ie(),{setContainerRef:a,containerRect:c}=yn();ne(()=>{l(c==null?void 0:c.width)},[l,c==null?void 0:c.width]);const u=()=>t?t():n.createElement(ke,{key:xe,label:"Close",icon:fr,renderIcon:i,onClick:o});return n.createElement("div",{ref:a,style:r.toolbar,className:C(Ar())},e==null?void 0:e.map(s=>s===xe?u():s))}const Yr=oe(qt,Xr);function Sn(e,t){var i;return n.createElement(e.module.component,{key:e.module.name,...t},(i=e.children)===null||i===void 0?void 0:i.map(r=>Sn(r,t)))}function Hr(e,t={}){const{easing:i,...r}=e,{easing:o,...l}=t;return{easing:{...i,...o},...r,...l}}function No({carousel:e,animation:t,render:i,toolbar:r,controller:o,noScroll:l,on:a,plugins:c,slides:u,index:s,...d}){const{animation:m,carousel:g,render:f,toolbar:p,controller:v,noScroll:R,on:w,slides:S,index:$,plugins:z,...k}=nt,{config:T,augmentation:I}=ar([X(Or,[X(Fr,[X(Lr,[X(Ir),X(Yr),X($r)])])])],c||z),M=I({animation:Hr(m,t),carousel:{...g,...e},render:{...f,...i},toolbar:{...p,...r},controller:{...v,...o},noScroll:{...R,...l},on:{...w,...a},...k,...d});return M.open?n.createElement(vn,{...M},n.createElement(hr,{slides:u||S,index:De(s||$)},n.createElement(mr,null,n.createElement(sr,null,Sn(X(Zr,T),M))))):null}const ue={ref:null,position:"bottom",width:120,height:80,border:1,borderRadius:4,padding:4,gap:16,imageFit:"contain",vignette:!0,hidden:!1,showToggle:!1},bt=e=>({...ue,...e});function Rn(){const{thumbnails:e}=A();return bt(e)}const he=e=>me(Qe,e),Y=e=>he(me("thumbnail",e)),Vr=ee("VideoThumbnail",n.createElement("path",{d:"M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})),Ur=ee("UnknownThumbnail",n.createElement("path",{d:"M23 18V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zM8.5 12.5l2.5 3.01L14.5 11l4.5 6H5l3.5-4.5z"}));function Br({slide:e,render:t,rect:i,imageFit:r}){var o;const l=(o=t.thumbnail)===null||o===void 0?void 0:o.call(t,{slide:e,render:t,rect:i,imageFit:r});if(l)return l;const a={render:t,rect:i,imageFit:r};if(e.thumbnail)return n.createElement(de,{slide:{src:e.thumbnail},...a});if(pe(e))return n.createElement(de,{slide:e,...a});const c=C(Y($e));return e.type==="video"?n.createElement(n.Fragment,null,e.poster&&n.createElement(de,{slide:{src:e.poster},...a}),n.createElement(Vr,{className:c})):n.createElement(Ur,{className:c})}const Kr=fe("active"),qe=fe("fadein"),Je=fe("fadeout"),jr=fe("placeholder"),Xt="delay",Yt="duration";function Gr({slide:e,onClick:t,active:i,fadeIn:r,fadeOut:o,placeholder:l,onLoseFocus:a}){const c=n.useRef(null),{render:u,styles:s}=A(),{getOwnerDocument:d}=Me(),{width:m,height:g,imageFit:f}=Rn(),p={width:m,height:g},v=D(a);return n.useEffect(()=>{o&&d().activeElement===c.current&&v()},[o,v,d]),n.createElement("button",{ref:c,type:"button",className:U(C(Ee),C(Y()),i&&C(Y(Kr())),r&&C(Y(qe())),o&&C(Y(Je())),l&&C(Y(jr()))),style:{...r?{[W(Y(qe(Yt)))]:`${r.duration}ms`,[W(Y(qe(Xt)))]:`${r.delay}ms`}:null,...o?{[W(Y(Je(Yt)))]:`${o.duration}ms`,[W(Y(Je(Xt)))]:`${o.delay}ms`}:null,...s.thumbnail},onClick:t},e&&Br({slide:e,render:u,rect:p,imageFit:f}))}function Ht(e){return["top","bottom"].includes(e)}function Vt(e,t){return t+2*(e.border+e.padding)+e.gap}function qr(e){const{thumbnail:t,poster:i}=e||{thumbnail:"placeholder"};return typeof t=="string"&&t||typeof i=="string"&&i||e&&un(e)||void 0}function Ut({visible:e,containerRef:t}){const i=n.useRef(null),r=We(),{publish:o,subscribe:l}=Ce(),{carousel:a,styles:c}=A(),{slides:u,globalIndex:s,animation:d}=le(),{registerSensors:m,subscribeSensors:g}=Mn();Nn(g);const f=Rn(),{position:p,width:v,height:R,border:w,borderStyle:S,borderColor:$,borderRadius:z,padding:k,gap:T,vignette:I}=f,M=(d==null?void 0:d.duration)!==void 0&&(d==null?void 0:d.increment)||0,y=(d==null?void 0:d.duration)||0,{prepareAnimation:F}=rt(i,h=>({keyframes:Ht(p)?[{transform:`translateX(${(r?-1:1)*Vt(f,v)*M+h}px)`},{transform:"translateX(0)"}]:[{transform:`translateY(${Vt(f,R)*M+h}px)`},{transform:"translateY(0)"}],duration:y,easing:d==null?void 0:d.easing})),B=D(()=>{let h=0;if(t.current&&i.current){const x=t.current.getBoundingClientRect(),P=i.current.getBoundingClientRect();h=Ht(p)?P.left-x.left-(x.width-P.width)/2:P.top-x.top-(x.height-P.height)/2}F(h)});n.useEffect(()=>Te(l(et,B)),[l,B]);const O=dn(a,u),L=[];if(ft(u))for(let h=s-O-Math.abs(M);h<=s+O+Math.abs(M);h+=1){const x=a.finite&&(h<0||h>u.length-1)||M<0&&h<s-O||M>0&&h>s+O?null:pt(u,h),P=[`${h}`,qr(x)].filter(Boolean).join("|");L.push({key:P,index:h,slide:x})}const b=h=>()=>{h>s?o(ce,{count:h-s}):h<s&&o(ae,{count:s-h})};return n.createElement("div",{className:U(C(he("container")),C(Ee)),style:{...e?null:{display:"none"},...v!==ue.width?{[W(Y("width"))]:`${v}px`}:null,...R!==ue.height?{[W(Y("height"))]:`${R}px`}:null,...w!==ue.border?{[W(Y("border"))]:`${w}px`}:null,...S?{[W(Y("border_style"))]:S}:null,...$?{[W(Y("border_color"))]:$}:null,...z!==ue.borderRadius?{[W(Y("border_radius"))]:`${z}px`}:null,...k!==ue.padding?{[W(Y("padding"))]:`${k}px`}:null,...T!==ue.gap?{[W(Y("gap"))]:`${T}px`}:null,...c.thumbnailsContainer}},n.createElement("nav",{ref:i,style:c.thumbnailsTrack,className:U(C(he("track")),C(Ee)),tabIndex:-1,...m},L.map(({key:h,index:x,slide:P})=>{const Z=y/Math.abs(M||1),H=M>0&&x>s+O-M&&x<=s+O||M<0&&x<s-O-M&&x>=s-O?{duration:Z,delay:((M>0?x-(s+O-M):s-O-M-x)-1)*Z}:void 0,G=M>0&&x<s-O||M<0&&x>s+O?{duration:Z,delay:(M>0?M-(s-O-x):-M-(x-(s+O)))*Z}:void 0;return n.createElement(Gr,{key:h,slide:P,active:x===s,fadeIn:H,fadeOut:G,placeholder:!P,onClick:b(x),onLoseFocus:()=>{var N;return(N=i.current)===null||N===void 0?void 0:N.focus()}})})),I&&n.createElement("div",{className:C(he("vignette"))}))}const In=n.createContext(null),Jr=re("useThumbnails","ThumbnailsContext",In);function Qr({children:e,...t}){const{ref:i,position:r,hidden:o}=bt(t.thumbnails),[l,a]=n.useState(!o),c=n.useRef(null),u=n.useMemo(()=>({visible:l,show:()=>a(!0),hide:()=>a(!1)}),[l]);return n.useImperativeHandle(i,()=>u,[u]),n.createElement(vn,{...t},n.createElement(In.Provider,{value:u},n.createElement("div",{ref:c,className:U(C(he()),C(he(`${r}`)))},["start","top"].includes(r)&&n.createElement(Ut,{containerRef:c,visible:l}),n.createElement("div",{className:C(he("wrapper"))},e),["end","bottom"].includes(r)&&n.createElement(Ut,{containerRef:c,visible:l}))))}const Pn=()=>n.createElement(n.Fragment,null,n.createElement("path",{strokeWidth:2,stroke:"currentColor",strokeLinejoin:"round",fill:"none",d:"M3 5l18 0l0 14l-18 0l0-14z"}),n.createElement("path",{d:"M5 14h4v3h-4zM10 14h4v3h-4zM15 14h4v3h-4z"})),eo=ee("ThumbnailsVisible",Pn()),to=wn("ThumbnailsHidden",Pn());function no(){const{visible:e,show:t,hide:i}=Jr(),{render:r}=A();return r.buttonThumbnails?n.createElement(n.Fragment,null,r.buttonThumbnails({visible:e,show:t,hide:i})):n.createElement(ke,{label:e?"Hide thumbnails":"Show thumbnails",icon:e?eo:to,renderIcon:e?r.iconThumbnailsVisible:r.iconThumbnailsHidden,onClick:e?i:t})}function So({augment:e,contains:t,append:i,addParent:r}){e(({thumbnails:l,toolbar:a,...c})=>{const u=bt(l);return{toolbar:vt(a,Qe,u.showToggle?n.createElement(no,null):null),thumbnails:u,...c}});const o=oe(Qe,Qr);t(It)?i(It,o):r(lt,o)}const be=e=>C(`slide_${e}`),it={descriptionTextAlign:"start",descriptionMaxLines:3,showToggle:!1,hidden:!1},Et=e=>({...it,...e});function ro(){const{captions:e}=A();return Et(e)}const $n=n.createContext(null),xt=re("useCaptions","CaptionsContext",$n);function oo({captions:e,children:t}){const{ref:i,hidden:r}=Et(e),[o,l]=n.useState(!r),a=n.useMemo(()=>({visible:o,show:()=>l(!0),hide:()=>l(!1)}),[o]);return n.useImperativeHandle(i,()=>a,[a]),n.createElement($n.Provider,{value:a},t)}function io({title:e}){const{toolbarWidth:t}=ie(),{styles:i}=A(),{visible:r}=xt();return r?n.createElement("div",{style:i.captionsTitleContainer,className:U(be("captions_container"),be("title_container"))},n.createElement("div",{className:be("title"),style:{...t?{[W("toolbar_width")]:`${t}px`}:null,...i.captionsTitle}},e)):null}function lo({description:e}){const{descriptionTextAlign:t,descriptionMaxLines:i}=ro(),{styles:r}=A(),{visible:o}=xt();return o?n.createElement("div",{style:r.captionsDescriptionContainer,className:U(be("captions_container"),be("description_container"))},n.createElement("div",{className:be("description"),style:{...t!==it.descriptionTextAlign||i!==it.descriptionMaxLines?{[W("slide_description_text_align")]:t,[W("slide_description_max_lines")]:i}:null,...r.captionsDescription}},typeof e=="string"?e.split(`
`).flatMap((l,a)=>[...a>0?[n.createElement("br",{key:a})]:[],l]):e)):null}const zn=()=>n.createElement(n.Fragment,null,n.createElement("path",{strokeWidth:2,stroke:"currentColor",strokeLinejoin:"round",fill:"none",d:"M3 5l18 0l0 14l-18 0l0-14z"}),n.createElement("path",{d:"M7 15h3c.55 0 1-.45 1-1v-1H9.5v.5h-2v-3h2v.5H11v-1c0-.55-.45-1-1-1H7c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1zm7 0h3c.55 0 1-.45 1-1v-1h-1.5v.5h-2v-3h2v.5H18v-1c0-.55-.45-1-1-1h-3c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1z"})),ao=ee("CaptionsVisible",zn()),co=wn("CaptionsVisible",zn());function so(){const{visible:e,show:t,hide:i}=xt(),{render:r}=A();return r.buttonCaptions?n.createElement(n.Fragment,null,r.buttonCaptions({visible:e,show:t,hide:i})):n.createElement(ke,{label:e?"Hide captions":"Show captions",icon:e?ao:co,renderIcon:e?r.iconCaptionsVisible:r.iconCaptionsHidden,onClick:e?i:t})}function Ro({augment:e,addModule:t}){e(({captions:i,render:{slideFooter:r,...o},toolbar:l,...a})=>{const c=Et(i);return{render:{slideFooter:({slide:u})=>n.createElement(n.Fragment,null,r==null?void 0:r({slide:u}),u.title&&n.createElement(io,{title:u.title}),u.description&&n.createElement(lo,{description:u.description})),...o},toolbar:vt(l,Rt,c.showToggle?n.createElement(so,null):null),captions:c,...a}}),t(oe(Rt,oo))}const uo={maxZoomPixelRatio:1,zoomInMultiplier:2,doubleTapDelay:300,doubleClickDelay:500,doubleClickMaxStops:2,keyboardMoveDistance:50,wheelZoomDistanceFactor:100,pinchZoomDistanceFactor:100,scrollToZoom:!1},Tn=e=>({...uo,...e});function ho(e,t,i,r){const o=n.useRef(void 0),l=n.useRef(void 0),{zoom:a}=A().animation,c=gt(),u=D(()=>{var s,d,m;if((s=o.current)===null||s===void 0||s.cancel(),o.current=void 0,l.current&&r!=null&&r.current){try{o.current=(m=(d=r.current).animate)===null||m===void 0?void 0:m.call(d,[{transform:l.current},{transform:`scale(${e}) translateX(${t}px) translateY(${i}px)`}],{duration:c?0:a??500,easing:o.current?"ease-out":"ease-in-out"})}catch(g){console.error(g)}l.current=void 0,o.current&&(o.current.onfinish=()=>{o.current=void 0})}});return ne(u,[e,t,i,u]),n.useCallback(()=>{l.current=r!=null&&r.current?window.getComputedStyle(r.current).transform:void 0},[r])}function mo(e,t){const{on:i}=A(),r=D(()=>{var o;t||(o=i.zoom)===null||o===void 0||o.call(i,{zoom:e})});n.useEffect(r,[e,r])}function Oe(){const{zoom:e}=A();return Tn(e)}function fo(e,t){var i,r;let o={width:0,height:0},l={width:0,height:0};const{currentSlide:a}=le(),{imageFit:c}=A().carousel,{maxZoomPixelRatio:u}=Oe();if(e&&a){const d={...a,...t};if(pe(d)){const m=mt(d,c),g=Math.max(...(((i=d.srcSet)===null||i===void 0?void 0:i.map(p=>p.width))||[]).concat(d.width?[d.width]:[])),f=Math.max(...(((r=d.srcSet)===null||r===void 0?void 0:r.map(p=>p.height))||[]).concat(d.height?[d.height]:[]));g>0&&f>0&&e.width>0&&e.height>0&&(l=m?{width:Math.round(Math.min(g,e.width/e.height*f)),height:Math.round(Math.min(f,e.height/e.width*g))}:{width:g,height:f},l={width:l.width*u,height:l.height*u},o=m?{width:Math.min(e.width,l.width,g),height:Math.min(e.height,l.height,f)}:{width:Math.round(Math.min(e.width,e.height/f*g,g)),height:Math.round(Math.min(e.height,e.width/g*f,f))})}}const s=o.width?Math.max(ht(l.width/o.width,5),1):1;return{imageRect:o,maxZoom:s}}function Bt(e,t){return((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2)**.5}function Kt(e,t,i=100,r=2){return e*Math.min(1+Math.abs(t/i),r)**Math.sign(t)}function po(e,t,i,r,o,l){const a=n.useRef([]),c=n.useRef(0),u=n.useRef(void 0),{globalIndex:s}=le(),{getOwnerWindow:d}=Me(),{containerRef:m,subscribeSensors:g}=ie(),{keyboardMoveDistance:f,zoomInMultiplier:p,wheelZoomDistanceFactor:v,scrollToZoom:R,doubleTapDelay:w,doubleClickDelay:S,doubleClickMaxStops:$,pinchZoomDistanceFactor:z}=Oe(),k=n.useCallback(b=>{if(m.current){const{pageX:h,pageY:x}=b,{scrollX:P,scrollY:Z}=d(),{left:H,top:G,width:N,height:K}=m.current.getBoundingClientRect();return[h-H-P-N/2,x-G-Z-K/2]}return[]},[m,d]),T=D(b=>{const{key:h,metaKey:x,ctrlKey:P}=b,Z=x||P,H=()=>{b.preventDefault(),b.stopPropagation()};if(e>1){const N=(K,Le)=>{H(),o(K,Le)};h==="ArrowDown"?N(0,f):h==="ArrowUp"?N(0,-f):h==="ArrowLeft"?N(-f,0):h==="ArrowRight"&&N(f,0)}const G=N=>{H(),r(N)};h==="+"||Z&&h==="="?G(e*p):h==="-"||Z&&h==="_"?G(e/p):Z&&h==="0"&&G(1)}),I=D(b=>{if((b.ctrlKey||R)&&Math.abs(b.deltaY)>Math.abs(b.deltaX)){b.stopPropagation(),r(Kt(e,-b.deltaY,v),!0,...k(b));return}e>1&&(b.stopPropagation(),R||o(b.deltaX,b.deltaY))}),M=n.useCallback(b=>{const h=a.current;h.splice(0,h.length,...h.filter(x=>x.pointerId!==b.pointerId))},[]),y=n.useCallback(b=>{M(b),b.persist(),a.current.push(b)},[M]),F=D(b=>{var h;const x=a.current;if(b.pointerType==="mouse"&&b.buttons>1||!(!((h=l==null?void 0:l.current)===null||h===void 0)&&h.contains(b.target)))return;e>1&&b.stopPropagation();const{timeStamp:P}=b;x.length===0&&P-c.current<(b.pointerType==="touch"?w:S)?(c.current=0,r(e!==t?e*Math.max(t**(1/$),p):1,!1,...k(b))):c.current=P,y(b),x.length===2&&(u.current=Bt(x[0],x[1]))}),B=D(b=>{const h=a.current,x=h.find(P=>P.pointerId===b.pointerId);if(h.length===2&&u.current){b.stopPropagation(),y(b);const P=Bt(h[0],h[1]),Z=P-u.current;Math.abs(Z)>0&&(r(Kt(e,Z,z),!0,...h.map(H=>k(H)).reduce((H,G)=>G.map((N,K)=>H[K]+N/2))),u.current=P);return}e>1&&(b.stopPropagation(),x&&(h.length===1&&o((x.clientX-b.clientX)/e,(x.clientY-b.clientY)/e),y(b)))}),O=n.useCallback(b=>{const h=a.current;h.length===2&&h.find(x=>x.pointerId===b.pointerId)&&(u.current=void 0),M(b)},[M]),L=n.useCallback(()=>{const b=a.current;b.splice(0,b.length),c.current=0,u.current=void 0},[]);Cn(g,F,B,O,i),n.useEffect(L,[s,L]),n.useEffect(()=>i?()=>{}:Te(L,g(st,T),g(ut,I)),[i,g,L,T,I])}function vo(e,t,i){const[r,o]=n.useState(1),[l,a]=n.useState(0),[c,u]=n.useState(0),s=ho(r,l,c,i),{currentSlide:d,globalIndex:m}=le(),{containerRect:g,slideRect:f}=ie(),{zoomInMultiplier:p}=Oe(),v=d&&pe(d)?d.src:void 0,R=!v||!(i!=null&&i.current);ne(()=>{o(1),a(0),u(0)},[m,v]);const w=n.useCallback((T,I,M)=>{const y=M||r,F=l-(T||0),B=c-(I||0),O=(e.width*y-f.width)/2/y,L=(e.height*y-f.height)/2/y;a(Math.min(Math.abs(F),Math.max(O,0))*Math.sign(F)),u(Math.min(Math.abs(B),Math.max(L,0))*Math.sign(B))},[r,l,c,f,e.width,e.height]),S=n.useCallback((T,I,M,y)=>{const F=ht(Math.min(Math.max(T+.001<t?T:t,1),t),5);F!==r&&(I||s(),w(M?M*(1/r-1/F):0,y?y*(1/r-1/F):0,F),o(F))},[r,t,w,s]),$=D(()=>{r>1&&(r>t&&S(t,!0),w())});ne($,[g.width,g.height,$]);const z=n.useCallback(()=>S(r*p),[r,p,S]),k=n.useCallback(()=>S(r/p),[r,p,S]);return{zoom:r,offsetX:l,offsetY:c,disabled:R,changeOffsets:w,changeZoom:S,zoomIn:z,zoomOut:k}}const Dn=n.createContext(null),wt=re("useZoom","ZoomControllerContext",Dn);function go({children:e}){const[t,i]=n.useState(),{slideRect:r}=ie(),{imageRect:o,maxZoom:l}=fo(r,t==null?void 0:t.imageDimensions),{zoom:a,offsetX:c,offsetY:u,disabled:s,changeZoom:d,changeOffsets:m,zoomIn:g,zoomOut:f}=vo(o,l,t==null?void 0:t.zoomWrapperRef);mo(a,s),po(a,l,s,d,m,t==null?void 0:t.zoomWrapperRef);const p=n.useMemo(()=>({zoom:a,maxZoom:l,offsetX:c,offsetY:u,disabled:s,zoomIn:g,zoomOut:f,changeZoom:d}),[a,l,c,u,s,g,f,d]);n.useImperativeHandle(Oe().ref,()=>p,[p]);const v=n.useMemo(()=>({...p,setZoomWrapper:i}),[p,i]);return n.createElement(Dn.Provider,{value:v},e)}const bo=ee("ZoomIn",n.createElement(n.Fragment,null,n.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),n.createElement("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"}))),Eo=ee("ZoomOut",n.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"})),jt=n.forwardRef(function({zoomIn:e,onLoseFocus:t},i){const r=n.useRef(!1),o=n.useRef(!1),{zoom:l,maxZoom:a,zoomIn:c,zoomOut:u,disabled:s}=wt(),{render:d}=A(),m=s||(e?l>=a:l<=1);return n.useEffect(()=>{m&&r.current&&o.current&&t(),m||(r.current=!0)},[m,t]),n.createElement(ke,{ref:i,disabled:m,label:e?"Zoom in":"Zoom out",icon:e?bo:Eo,renderIcon:e?d.iconZoomIn:d.iconZoomOut,onClick:e?c:u,onFocus:()=>{o.current=!0},onBlur:()=>{o.current=!1}})});function xo(){const e=n.useRef(null),t=n.useRef(null),{focus:i}=ie(),r=n.useCallback(a=>{var c,u;!((c=a.current)===null||c===void 0)&&c.disabled?i():(u=a.current)===null||u===void 0||u.focus()},[i]),o=n.useCallback(()=>r(e),[r]),l=n.useCallback(()=>r(t),[r]);return n.createElement(n.Fragment,null,n.createElement(jt,{zoomIn:!0,ref:e,onLoseFocus:l}),n.createElement(jt,{ref:t,onLoseFocus:o}))}function wo(){const{render:e}=A(),t=wt();return e.buttonZoom?n.createElement(n.Fragment,null,e.buttonZoom(t)):n.createElement(xo,null)}function yo(e){var t;return(((t=e.srcSet)===null||t===void 0?void 0:t.length)||0)>0}function Mo({current:e,preload:t},{type:i,source:r}){switch(i){case"fetch":return e?{current:e,preload:r}:{current:r};case"done":return r===t?{current:r}:{current:e,preload:t};default:throw new Error(an)}}function Co(e){var t,i;const[{current:r,preload:o},l]=n.useReducer(Mo,{}),{slide:a,rect:c,imageFit:u,render:s,interactive:d}=e,m=a.srcSet.sort((k,T)=>k.width-T.width),g=(t=a.width)!==null&&t!==void 0?t:m[m.length-1].width,f=(i=a.height)!==null&&i!==void 0?i:m[m.length-1].height,p=mt(a,u),v=Math.max(...m.map(k=>k.width)),R=Math.min((p?Math.max:Math.min)(c.width,g*(c.height/f)),v),w=rr(),S=D(()=>{var k;const T=(k=m.find(I=>I.width>=R*w))!==null&&k!==void 0?k:m[m.length-1];(!r||m.findIndex(I=>I.src===r)<m.findIndex(I=>I===T))&&l({type:"fetch",source:T.src})});ne(S,[c.width,c.height,w,S]);const $=D(k=>l({type:"done",source:k})),z={WebkitTransform:d?"initial":"translateZ(0)"};return p||Object.assign(z,c.width/c.height<g/f?{width:"100%",height:"auto"}:{width:"auto",height:"100%"}),n.createElement(n.Fragment,null,o&&o!==r&&n.createElement(de,{key:"preload",...e,offset:void 0,slide:{...a,src:o,srcSet:void 0},style:{position:"absolute",visibility:"hidden",...z},onLoad:()=>$(o),render:{...s,iconLoading:()=>null,iconError:()=>null}}),r&&n.createElement(de,{key:"current",...e,slide:{...a,src:r,srcSet:void 0},style:z}))}function ko({render:e,slide:t,offset:i,rect:r}){var o;const[l,a]=n.useState(),c=n.useRef(null),{zoom:u,maxZoom:s,offsetX:d,offsetY:m,setZoomWrapper:g}=wt(),f=u>1,{carousel:p,on:v}=A(),{currentIndex:R}=le();ne(()=>i===0?(g({zoomWrapperRef:c,imageDimensions:l}),()=>g(void 0)):()=>{},[i,l,g]);let w=(o=e.slide)===null||o===void 0?void 0:o.call(e,{slide:t,offset:i,rect:r,zoom:u,maxZoom:s});if(!w&&pe(t)){const S={slide:t,offset:i,rect:r,render:e,imageFit:p.imageFit,imageProps:p.imageProps,onClick:i===0?()=>{var $;return($=v.click)===null||$===void 0?void 0:$.call(v,{index:R})}:void 0};w=yo(t)?n.createElement(Co,{...S,slide:t,interactive:f,rect:i===0?{width:r.width*u,height:r.height*u}:r}):n.createElement(de,{onLoad:$=>a({width:$.naturalWidth,height:$.naturalHeight}),...S})}return w?n.createElement("div",{ref:c,className:U(C(Bn),C(Ee),C(Qt),f&&C(jn)),style:i===0?{transform:`scale(${u}) translateX(${d}px) translateY(${m}px)`}:void 0},w):null}const Io=({augment:e,addModule:t})=>{e(({zoom:i,toolbar:r,render:o,controller:l,...a})=>{const c=Tn(i);return{zoom:c,toolbar:vt(r,Pt,n.createElement(wo,null)),render:{...o,slide:u=>{var s;return pe(u.slide)?n.createElement(ko,{render:o,...u}):(s=o.slide)===null||s===void 0?void 0:s.call(o,u)}},controller:{...l,preventDefaultWheelY:c.scrollToZoom},...a}}),t(oe(Pt,go))};export{No as I,So as L,Ro as N,Io as P};
